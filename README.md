# 动态文字格式化功能说明

## 概述

对博客的动态（Moments）功能进行了重大优化，现在支持更灵活和丰富的文字内容显示。

## 主要改进

### 1. 智能换行和段落支持

- **之前**：所有文字内容都显示在一行中，不支持换行
- **现在**：支持多段落显示，使用 `\n\n` 分隔段落

### 2. 智能截断逻辑

- **之前**：简单按字符数截断，可能在单词中间截断
- **现在**：智能截断，优先在句号、感叹号、问号处截断，其次在空格处截断

### 3. 富文本格式支持

现在支持以下 Markdown 风格的格式：

#### 粗体文字

```
**粗体文字**
```

显示效果：**粗体文字**

#### 斜体文字

```
*斜体文字*
```

显示效果：_斜体文字_

#### 代码文字

```
`代码文字`
```

显示效果：`代码文字`

#### 链接

```
[链接文字](https://example.com)
```

显示效果：[链接文字](https://example.com)

### 4. 改进的用户体验

- **条件显示"查看详情"链接**：只有当内容超过120字符或包含换行时才显示
- **更好的视觉层次**：不同格式的文字有不同的视觉样式
- **响应式设计**：在不同设备上都有良好的显示效果

## 技术实现

### 核心组件

1. **FormattedText 组件** (`components/FormattedText.tsx`)

   - 处理文本格式化
   - 支持预览模式和完整模式
   - 智能截断逻辑

2. **更新的 MomentCard 组件** (`components/MomentCard.tsx`)

   - 使用新的 FormattedText 组件
   - 改进的布局和样式

3. **更新的动态详情页** (`app/moments/[id]/page.tsx`)
   - 完整显示格式化内容
   - 更好的阅读体验

### 示例数据

```typescript
{
  id: '8',
  date: '2025-01-20T09:45:33',
  content: '最近在学习 *React* 的新特性，发现 `useCallback` 和 `useMemo` 的使用场景比我想象的要复杂。\n\n推荐一个很好的学习资源：[React 官方文档](https://react.dev)，写得非常详细。\n\n**重要提醒**：不要过度优化，先让代码跑起来再说！'
}
```

## 使用方法

### 在动态内容中使用格式化

1. **段落分隔**：使用 `\n\n` 来分隔段落
2. **粗体**：使用 `**文字**` 来加粗
3. **斜体**：使用 `*文字*` 来倾斜
4. **代码**：使用 `` `代码` `` 来显示代码样式
5. **链接**：使用 `[文字](链接)` 来创建链接

### 最佳实践

1. **适度使用格式化**：不要过度使用格式化，保持内容的可读性
2. **段落分隔**：长文本建议分段，提高阅读体验
3. **链接使用**：外部链接会在新窗口打开，确保用户体验
4. **代码标记**：技术相关内容可以使用代码格式突出显示

## 兼容性

- 完全向后兼容现有的动态内容
- 不使用格式化语法的内容会正常显示
- 支持深色模式和浅色模式
- 响应式设计，适配各种屏幕尺寸

## 未来计划

1. 支持更多 Markdown 语法（如列表、引用等）
2. 添加表情符号支持
3. 支持图片内联显示
4. 添加内容编辑器界面
